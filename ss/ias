[Rule]
AND,((DOMAIN-SUFFIX,googlevideo.com), (PROTOCOL,UDP)),REJECT
AND,((DOMAIN,youtubei.googleapis.com), (PROTOCOL,UDP)),REJECT

[URL Rewrite]
^https?:\/\/[\w-]+\.googlevideo\.com\/initplayback.+&oad - reject-200

[Script]
youtube.request = type=http-request, pattern=^https:\/\/youtubei\.googleapis\.com\/youtubei\/v1\/(browse|next|player|reel\/reel_watch_sequence|get_watch), script-path=https://raw.githubusercontent.com/Maasea/sgmodule/master/Script/Youtube/dist/youtube.request.preview.js, requires-body=true, binary-body-mode=true, max-size=-1

youtube.response = type=http-response, pattern=^https:\/\/youtubei\.googleapis\.com\/youtubei\/v1\/(browse|next|player|search|reel\/reel_watch_sequence|guide|account\/get_setting|get_watch), script-path=https://raw.githubusercontent.com/Maasea/sgmodule/master/Script/Youtube/dist/youtube.response.preview.js, requires-body=true, binary-body-mode=true, max-size=-1, argument="{"lyricLang":"{{{歌词翻译语言}}}","captionLang":"{{{字幕翻译语言}}}","blockUpload":{{{屏蔽上传按钮}}},"blockImmersive":{{{屏蔽选段按钮}}},"debug":{{{启用调试模式}}}}"

[MITM]
hostname = %APPEND% *.googlevideo.com, youtubei.googleapis.com
enable = true
ca-passphrase = Shadowrocket
ca-p12 = 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